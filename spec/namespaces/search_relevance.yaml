openapi: 3.1.0
info:
  title: OpenSearch Search Relevance API
  description: OpenSearch Search Relevance API.
  version: 1.0.0
paths:
  /_plugins/_search_relevance/query_sets:
    get:
      operationId: search_relevance.get_query_sets.0
      x-operation-group: search_relevance.get_query_sets
      x-version-added: '3.1'
      description: Lists the current query sets available.
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_query_sets@200'
    post:
      operationId: search_relevance.post_query_sets.0
      x-operation-group: search_relevance.post_query_sets
      x-version-added: '3.1'
      description: Creates a new query set by sampling queries from the user behavior data. 
      requestBody:
        $ref: '#/components/requestBodies/search_relevance.post_query_sets'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.post_query_sets@200'
    put:
      operationId: search_relevance.put_query_sets.0
      x-operation-group: search_relevance.put_query_sets
      x-version-added: '3.1'
      description: Creates a new query set by uploading manually.
      requestBody:
        $ref: '#/components/requestBodies/search_relevance.put_query_sets'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.put_query_sets@200'
  /_plugins/_search_relevance/query_sets/{query_set_id}:
    get:
      operationId: search_relevance.get_query_sets.1
      x-operation-group: search_relevance.get_query_sets
      x-version-added: '3.1'
      description: Lists the current query sets available.
      parameters:
        - $ref: '#/components/parameters/search_relevance.get_query_sets::path.query_set_id'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_query_sets@200'
    delete:
      operationId: search_relevance.delete_query_sets.0
      x-operation-group: search_relevance.delete_query_sets
      x-version-added: '3.1'
      description: Deletes a query set.
      parameters:
        - $ref: '#/components/parameters/search_relevance.delete_query_sets::path.query_set_id'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.delete_query_sets@200'
  /_plugins/_search_relevance/judgments:
    get:
      operationId: search_relevance.get_judgments.0
      x-operation-group: search_relevance.get_judgments
      x-version-added: '3.1'
      description: Gets judgments.
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_judgments@200'
    put:
      operationId: search_relevance.put_judgments.0
      x-operation-group: search_relevance.put_judgments
      x-version-added: '3.1'
      description: Creates a judgment.
      requestBody:
        description: The request body of the judgment to be created.
        $ref: '#/components/requestBodies/search_relevance.put_judgments' 
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.put_judgments@200'
  /_plugins/_search_relevance/judgments/{judgment_id}:
    get:
      operationId: search_relevance.get_judgments.1
      x-operation-group: search_relevance.get_judgments
      x-version-added: '3.1'
      description: Gets judgments.
      parameters:
        - $ref: '#/components/parameters/search_relevance.get_judgments::path.judgment_id'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_judgments@200'
    delete:
      operationId: search_relevance.delete_judgments.0
      x-operation-group: search_relevance.delete_judgments
      x-version-added: '3.1'
      description: Deletes a specified judgment.
      parameters:
        - $ref: '#/components/parameters/search_relevance.delete_judgments::path.judgment_id'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.delete_judgments@200'
  /_plugins/_search_relevance/search_configurations:
    get:
      operationId: search_relevance.get_search_configurations.0
      x-operation-group: search_relevance.get_search_configurations
      x-version-added: '3.1'
      description: Gets the search configurations.
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_search_configurations@200'
    put:
      operationId: search_relevance.put_search_configurations.0
      x-operation-group: search_relevance.put_search_configurations
      x-version-added: '3.1'
      description: Creates a search configuration.
      requestBody:
        $ref: '#/components/requestBodies/search_relevance.put_search_configurations' 
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.put_search_configurations@200'
  /_plugins/_search_relevance/search_configurations/{search_configuration_id}:
    get:
      operationId: search_relevance.get_search_configurations.1
      x-operation-group: search_relevance.get_search_configurations
      x-version-added: '3.1'
      description: Gets the search configurations.
      parameters:
        - $ref: '#/components/parameters/search_relevance.get_search_configurations::path.search_configuration_id'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_search_configurations@200'
    delete:
      operationId: search_relevance.delete_search_configurations.0
      x-operation-group: search_relevance.delete_search_configurations
      x-version-added: '3.1'
      description: Deletes a specified search configuration.
      parameters:
        - $ref: '#/components/parameters/search_relevance.delete_search_configurations::path.search_configuration_id'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.delete_search_configurations@200'
  /_plugins/_search_relevance/experiments:
    get:
      operationId: search_relevance.get_experiments.0
      x-operation-group: search_relevance.get_experiments
      x-version-added: '3.1'
      description: Gets experiments.
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_experiments@200'
    put:
      operationId: search_relevance.put_experiments.0
      x-operation-group: search_relevance.put_experiments
      x-version-added: '3.1'
      description: Creates an experiment.
      requestBody:
        $ref: '#/components/requestBodies/search_relevance.put_experiments'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.put_experiments@200'
  /_plugins/_search_relevance/experiments/{experiment_id}:
    get:
      operationId: search_relevance.get_experiments.1
      x-operation-group: search_relevance.get_experiments
      x-version-added: '3.1'
      description: Gets experiments.
      parameters:
        - $ref: '#/components/parameters/search_relevance.get_experiments::path.experiment_id'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_experiments@200'
    delete:
      operationId: search_relevance.delete_experiments.0
      x-operation-group: search_relevance.delete_experiments
      x-version-added: '3.1'
      description: Deletes a specified experiment.
      parameters:
        - $ref: '#/components/parameters/search_relevance.delete_experiments::path.experiment_id'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.delete_experiments@200'
  /_plugins/_search_relevance/{node_id}/stats:
    get:
      operationId: search_relevance.get_node_stats.0
      x-operation-group: search_relevance.get_node_stats
      x-version-added: '3.1'
      description: Gets stats by node.
      parameters:
        - $ref: '#/components/parameters/search_relevance.get_node_stats::path.node_id'
        - $ref: '#/components/parameters/search_relevance.get_node_stats::query.flat_stat_paths'
        - $ref: '#/components/parameters/search_relevance.get_node_stats::query.include_all_nodes'
        - $ref: '#/components/parameters/search_relevance.get_node_stats::query.include_individual_nodes'
        - $ref: '#/components/parameters/search_relevance.get_node_stats::query.include_info'
        - $ref: '#/components/parameters/search_relevance.get_node_stats::query.include_metadata'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_node_stats@200'
  /_plugins/_search_relevance/{node_id}/stats/{stat}:
    get: 
      operationId: search_relevance.get_node_stats.1
      x-operation-group: search_relevance.get_node_stats
      x-version-added: '3.1'
      description: Gets stats by node.
      parameters:
        - $ref: '#/components/parameters/search_relevance.get_node_stats::path.node_id'
        - $ref: '#/components/parameters/search_relevance.get_node_stats::path.stat'
        - $ref: '#/components/parameters/search_relevance.get_node_stats::query.flat_stat_paths'
        - $ref: '#/components/parameters/search_relevance.get_node_stats::query.include_all_nodes'
        - $ref: '#/components/parameters/search_relevance.get_node_stats::query.include_individual_nodes'
        - $ref: '#/components/parameters/search_relevance.get_node_stats::query.include_info'
        - $ref: '#/components/parameters/search_relevance.get_node_stats::query.include_metadata'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_node_stats@200'
  /_plugins/_search_relevance/stats:
    get:
      operationId: search_relevance.get_stats.0
      x-operation-group: search_relevance.get_stats
      x-version-added: '3.1'
      description: Gets stats.
      parameters:
        - $ref: '#/components/parameters/search_relevance.get_stats::query.flat_stat_paths'
        - $ref: '#/components/parameters/search_relevance.get_stats::query.include_all_nodes'
        - $ref: '#/components/parameters/search_relevance.get_stats::query.include_individual_nodes'
        - $ref: '#/components/parameters/search_relevance.get_stats::query.include_info'
        - $ref: '#/components/parameters/search_relevance.get_stats::query.include_metadata'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_stats@200'
  /_plugins/_search_relevance/stats/{stat}:
    get:
      operationId: search_relevance.get_stats.1
      x-operation-group: search_relevance.get_stats
      x-version-added: '3.1'
      description: Gets stats.
      parameters:
        - $ref: '#/components/parameters/search_relevance.get_stats::path.stat'
        - $ref: '#/components/parameters/search_relevance.get_stats::query.flat_stat_paths'
        - $ref: '#/components/parameters/search_relevance.get_stats::query.include_all_nodes'
        - $ref: '#/components/parameters/search_relevance.get_stats::query.include_individual_nodes'
        - $ref: '#/components/parameters/search_relevance.get_stats::query.include_info'
        - $ref: '#/components/parameters/search_relevance.get_stats::query.include_metadata'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_stats@200'
  /_plugins/_search_relevance/experiments/schedule:
    get:
      operationId: search_relevance.get_scheduled_experiments.0
      x-operation-group: search_relevance.get_scheduled_experiments
      x-version-added: '3.1'
      description: Gets the scheduled experiments.
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_scheduled_experiments@200'
    post:
      operationId: search_relevance.post_scheduled_experiments.0
      x-operation-group: search_relevance.post_scheduled_experiments
      x-version-added: '3.1'
      description: Creates a scheduled experiment.
      requestBody:
        $ref: '#/components/requestBodies/search_relevance.post_scheduled_experiments' 
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.post_scheduled_experiments@200'
  /_plugins/_search_relevance/experiments/schedule/{experiment_id}:
    get:
      operationId: search_relevance.get_scheduled_experiments.1
      x-operation-group: search_relevance.get_scheduled_experiments
      x-version-added: '3.1'
      description: Gets the scheduled experiments.
      parameters:
        - $ref: '#/components/parameters/search_relevance.get_scheduled_experiments::path.experiment_id'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.get_scheduled_experiments@200'
    delete:
      operationId: search_relevance.delete_scheduled_experiments.0
      x-operation-group: search_relevance.delete_scheduled_experiments
      x-version-added: '3.1'
      description: Deletes a specified scheduled experiment.
      parameters:
        - $ref: '#/components/parameters/search_relevance.delete_scheduled_experiments::path.experiment_id'
      responses:
        '200':
          $ref: '#/components/responses/search_relevance.delete_scheduled_experiments@200'          
components:
  parameters:
    search_relevance.get_query_sets::path.query_set_id: 
      name: query_set_id
      in: path
      required: true
      description: The query set id
      schema:
        type: string
    search_relevance.delete_query_sets::path.query_set_id: 
      name: query_set_id
      in: path
      required: true
      description: The query set id
      schema:
        type: string
    search_relevance.get_judgments::path.judgment_id:
      name: judgment_id
      in: path
      required: true
      description: The judgment id
      schema:
        type:
          string
    search_relevance.delete_judgments::path.judgment_id:
      name: judgment_id
      in: path
      required: true
      description: The judgment id
      schema:
        type:
          string
    search_relevance.get_search_configurations::path.search_configuration_id:
      name: search_configuration_id
      in: path
      required: true
      description: The search configuration id
      schema:
        type:
          string
    search_relevance.delete_search_configurations::path.search_configuration_id:
      name: search_configuration_id
      in: path
      required: true
      description: The search configuration id
      schema:
        type:
          string
    search_relevance.get_experiments::path.experiment_id:
      name: experiment_id
      in: path
      required: true
      description: The experiment id
      schema:
        type:
          string
    search_relevance.delete_experiments::path.experiment_id:
      name: experiment_id
      in: path
      required: true
      description: The experiment id
      schema:
        type:
          string
    search_relevance.get_scheduled_experiments::path.experiment_id:
      name: experiment_id
      in: path
      required: true
      description: The experiment id
      schema:
        type:
          string
    search_relevance.delete_scheduled_experiments::path.experiment_id:
      name: experiment_id
      in: path
      required: true
      description: The experiment id
      schema:
        type:
          string
    search_relevance.get_node_stats::path.node_id:
      name: node_id
      in: path
      required: true
      description: The node id
      schema:
        type:
          string
    search_relevance.get_node_stats::path.stat:
      name: stat
      in: path
      required: true
      description: The statistic to return
      schema:
        type:
          string
    search_relevance.get_stats::path.stat:
      name: stat
      in: path
      required: true
      description: The statistic to return
      schema:
        type:
          string
    search_relevance.get_node_stats::query.flat_stat_paths:
      name: flat_stat_paths
      in: query
      required: false
      description: Requests flattened stat paths as keys
      schema:
        type:
          string
    search_relevance.get_node_stats::query.include_metadata:
      name: include_metadata
      in: query
      required: false
      description: Whether to include metadata
      schema:
        type:
          string
    search_relevance.get_node_stats::query.include_individual_nodes:
      name: include_individual_nodes
      in: query
      required: false
      description: Whether to include individual nodes
      schema:
        type:
          string
    search_relevance.get_node_stats::query.include_all_nodes:
      name: include_all_nodes
      in: query
      required: false
      description: Whether to include all nodes
      schema:
        type:
          string
    search_relevance.get_node_stats::query.include_info:
      name: include_info
      in: query
      required: false
      description: Whether to include info
      schema:
        type:
          string
    search_relevance.get_stats::query.flat_stat_paths:
      name: flat_stat_paths
      in: query
      required: false
      description: Requests flattened stat paths as keys
      schema:
        type:
          string
    search_relevance.get_stats::query.include_metadata:
      name: include_metadata
      in: query
      required: false
      description: Whether to include metadata
      schema:
        type:
          string
    search_relevance.get_stats::query.include_individual_nodes:
      name: include_individual_nodes
      in: query
      required: false
      description: Whether to include individual nodes
      schema:
        type:
          string
    search_relevance.get_stats::query.include_all_nodes:
      name: include_all_nodes
      in: query
      required: false
      description: Whether to include all nodes
      schema:
        type:
          string
    search_relevance.get_stats::query.include_info:
      name: include_info
      in: query
      required: false
      description: Whether to include info
      schema:
        type:
          string
  requestBodies:
    search_relevance.post_query_sets:
      content:
        application/json:
          schema:
            $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PostQuerySetsRequest'
    search_relevance.put_query_sets:
      content:
        application/json:
          schema:
            $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PutQuerySetsRequest'
    search_relevance.put_judgments:
      content:
        application/json:
          schema:
            oneOf:
              - $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PutLLMJudgmentsRequest'
              - $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PutUBIJudgmentsRequest'
              - $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PutImportJudgmentsRequest'
    search_relevance.put_search_configurations:
      content:
        application/json:
          schema:
            $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PutSearchConfigurationRequest'
    search_relevance.put_experiments:
      content:
        application/json:
          schema:
            anyOf:
              - $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PutHybridOptimizerExperimentRequest'
              - $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PutPointwiseExperimentRequest'
              - $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PutPairwiseExperimentRequest'
    search_relevance.post_scheduled_experiments:
      content:
        application/json:
          schema:
            $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PostScheduledExperimentsRequest'
  responses:
    search_relevance.get_query_sets@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/_core.search.yaml#/components/schemas/SearchResult'
    search_relevance.post_query_sets@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PostQuerySetsResponse'
    search_relevance.put_query_sets@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PutQuerySetsResponse'
    search_relevance.delete_query_sets@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/_common.yaml#/components/schemas/WriteResponseBase'
    search_relevance.get_judgments@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/_core.search.yaml#/components/schemas/SearchResult'
    search_relevance.put_judgments@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PutJudgmentsResponse'
    search_relevance.delete_judgments@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/_common.yaml#/components/schemas/WriteResponseBase'
    search_relevance.get_search_configurations@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/_core.search.yaml.yaml#/components/schemas/SearchResult'
    search_relevance.put_search_configurations@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PutSearchConfigurationResponse'
    search_relevance.delete_search_configurations@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/_common.yaml#/components/schemas/WriteResponseBase'
    search_relevance.get_experiments@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/_core.search.yaml#/components/schemas/SearchResult'
    search_relevance.put_experiments@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PutExperimentResponse'
    search_relevance.delete_experiments@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/_common.yaml#/components/schemas/WriteResponseBase'
    search_relevance.get_node_stats@200:
      content:
        application/json:
          schema:
            allOf:
              - $ref: '../schemas/nodes._common.yaml#/components/schemas/NodesResponseBase'
              - type: object
                properties:
                  cluster_name:
                    $ref: '../schemas/_common.yaml#/components/schemas/Name'
                  info:
                    type: object
                  all_nodes:
                    type: object
                  nodes:
                    type: object
                required:
                  - nodes
    search_relevance.get_stats@200:
      content:
        application/json:
          schema:
            allOf:
              - $ref: '../schemas/nodes._common.yaml#/components/schemas/NodesResponseBase'
              - type: object
                properties:
                  cluster_name:
                    $ref: '../schemas/_common.yaml#/components/schemas/Name'
                  info:
                    type: object
                  all_nodes:
                    type: object
                  nodes:
                    type: object
                required:
                  - nodes
    search_relevance.get_scheduled_experiments@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/_core.search.yaml#/components/schemas/SearchResult'
    search_relevance.post_scheduled_experiments@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/search_relevance._common.yaml#/components/schemas/PostScheduledExperimentsResponse'
    search_relevance.delete_scheduled_experiments@200:
      content:
        application/json:
          schema:
            $ref: '../schemas/_common.yaml#/components/schemas/WriteResponseBase'